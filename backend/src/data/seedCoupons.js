import { Coupon } from "../models/coupon.models.js";
import mongoose from "mongoose";

const coupons = [
  {
    code: "WELCOME100",
    type: "flat",
    discount: 100,
    minOrderAmount: 0,
    isActive: true,
    maxUses: 1000,
    usedBy: [],
    firstTimeOnly: true,
    isStackable: false,
    applicableCategories: [],
    expiresAt: new Date("2026-01-01"),
    description: "₹100 off for first-time users",
  },
  {
    code: "SAVE10",
    type: "percentage",
    discount: 10,
    minOrderAmount: 500,
    isActive: true,
    maxUses: 500,
    usedBy: [],
    firstTimeOnly: false,
    isStackable: false,
    applicableCategories: [],
    expiresAt: new Date("2025-12-31"),
    description: "10% off on orders above ₹500",
  },
  {
    code: "MOBILE50",
    type: "flat",
    discount: 50,
    minOrderAmount: 999,
    isActive: true,
    maxUses: 200,
    usedBy: [],
    isStackable: false,
    applicableCategories: ["mobiles"],
    expiresAt: new Date("2025-12-15"),
    description: "₹50 off on mobiles above ₹999",
  },
  {
    code: "ELECTRO15",
    type: "percentage",
    discount: 15,
    minOrderAmount: 1500,
    isActive: true,
    maxUses: 300,
    usedBy: [],
    applicableCategories: ["electronics"],
    isStackable: false,
    expiresAt: new Date("2025-11-30"),
    description: "15% off on electronics above ₹1500",
  },
  {
    code: "SHOES25",
    type: "flat",
    discount: 25,
    minOrderAmount: 499,
    isActive: true,
    maxUses: 400,
    usedBy: [],
    applicableCategories: ["shoes"],
    isStackable: true,
    expiresAt: new Date("2025-10-31"),
    description: "₹25 off on shoes above ₹499",
  },
  {
    code: "GROCERY5",
    type: "percentage",
    discount: 5,
    minOrderAmount: 300,
    isActive: true,
    maxUses: 1000,
    usedBy: [],
    applicableCategories: ["groceries"],
    isStackable: true,
    expiresAt: new Date("2025-09-30"),
    description: "5% off on groceries above ₹300",
  },
  {
    code: "BEAUTY20",
    type: "percentage",
    discount: 20,
    minOrderAmount: 800,
    isActive: true,
    maxUses: 300,
    usedBy: [],
    applicableCategories: ["beauty"],
    isStackable: false,
    expiresAt: new Date("2025-10-01"),
    description: "20% off on beauty products above ₹800",
  },
  {
    code: "COMPUTE30",
    type: "flat",
    discount: 30,
    minOrderAmount: 1200,
    isActive: true,
    maxUses: 200,
    usedBy: [],
    applicableCategories: ["computers"],
    isStackable: false,
    expiresAt: new Date("2025-12-31"),
    description: "₹30 off on computers above ₹1200",
  },
  {
    code: "FREESHIP",
    type: "flat",
    discount: 40,
    minOrderAmount: 400,
    isActive: true,
    maxUses: 1000,
    usedBy: [],
    isStackable: true,
    applicableCategories: [],
    expiresAt: new Date("2025-12-31"),
    description: "₹40 shipping discount on orders above ₹400",
  },
  {
    code: "WEEKENDDEAL",
    type: "percentage",
    discount: 10,
    minOrderAmount: 1000,
    isActive: true,
    maxUses: 150,
    usedBy: [],
    isStackable: false,
    applicableCategories: [],
    expiresAt: new Date("2025-12-31"),
    description: "10% off on weekend orders above ₹1000",
  },
  {
    code: "FLAT200",
    type: "flat",
    discount: 200,
    minOrderAmount: 2000,
    isActive: true,
    maxUses: 80,
    usedBy: [],
    isStackable: false,
    applicableCategories: [],
    expiresAt: new Date("2025-12-01"),
    description: "₹200 off on orders above ₹2000",
  },
  {
    code: "FLASHSALE",
    type: "percentage",
    discount: 12,
    minOrderAmount: 600,
    isActive: true,
    maxUses: 100,
    usedBy: [],
    isStackable: false,
    applicableCategories: [],
    expiresAt: new Date("2025-08-31"),
    description: "12% off during flash sale",
  },
  {
    code: "BUYMORESAVE",
    type: "percentage",
    discount: 8,
    minOrderAmount: 999,
    isActive: true,
    maxUses: 999,
    usedBy: [],
    isStackable: true,
    applicableCategories: [],
    expiresAt: new Date("2026-01-31"),
    description: "8% off on large carts",
  },
  {
    code: "NEWYEAR2025",
    type: "flat",
    discount: 250,
    minOrderAmount: 2500,
    isActive: true,
    maxUses: 100,
    usedBy: [],
    isStackable: false,
    applicableCategories: [],
    expiresAt: new Date("2026-01-05"),
    description: "₹250 off on New Year 2025",
  },
  {
    code: "DIWALI75",
    type: "flat",
    discount: 75,
    minOrderAmount: 999,
    isActive: true,
    maxUses: 300,
    usedBy: [],
    isStackable: false,
    applicableCategories: [],
    expiresAt: new Date("2025-11-10"),
    description: "₹75 off for Diwali festival orders",
  },
];

const seedCoupons = async () => {
  try {
    await mongoose.connect(
      `${process.env.MONGODB_URI}`
    );
    // await Coupon.insertMany(coupons);
    await Coupon.updateMany(
      {},
      {
        $set: {
          usedBy: [],
        },
      }
    );
    console.log("Coupons inserted!");
  } catch (error) {
    console.log("Failed to insert the coupons" + error);
  } finally {
    await mongoose.disconnect();
  }
};

seedCoupons();
